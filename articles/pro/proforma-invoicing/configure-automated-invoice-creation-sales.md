---
title: Konfigurisanje automatskog kreiranja fakture
description: Ova tema pruža informacije o podešavanju i konfigurisanju automatskog kreiranja predračuna.
author: rumant
ms.date: 04/05/2021
ms.topic: article
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: 2d212f2279b28d900e75d45386e343f95b8e825e
ms.sourcegitcommit: 40f68387f594180af64a5e5c748b6efa188bd300
ms.translationtype: HT
ms.contentlocale: sr-Latn-RS
ms.lasthandoff: 05/10/2021
ms.locfileid: "6004188"
---
# <a name="set-up-automatic-invoice-creation"></a><span data-ttu-id="010b7-103">Konfigurisanje automatskog kreiranja fakture</span><span class="sxs-lookup"><span data-stu-id="010b7-103">Set up automatic invoice creation</span></span> 
 
<span data-ttu-id="010b7-104">_**Odnosi se na:** Jednostavna primena – od pogodbe do profakture, Project Operations za scenarije zasnovane na resursima / bez zaliha_</span><span class="sxs-lookup"><span data-stu-id="010b7-104">_**Applies To:** Lite deployment - deal to proforma invoicing, Project Operations for resource/non-stocked based scenarios_</span></span>

<span data-ttu-id="010b7-105">Možete da konfigurišete automatsko kreiranje faktura u usluzi Dynamics 365 Project Operations.</span><span class="sxs-lookup"><span data-stu-id="010b7-105">You can configure automatic invoice creation in Dynamics 365 Project Operations.</span></span> <span data-ttu-id="010b7-106">Sistem kreira nacrt predračuna na osnovu rasporeda faktura za svaki ugovor o projektu i predmet ugovora.</span><span class="sxs-lookup"><span data-stu-id="010b7-106">The system creates a draft proforma invoice based on the invoice schedule for each project contract and contract line.</span></span> <span data-ttu-id="010b7-107">Rasporedi faktura se konfigurišu na nivou predmeta ugovora.</span><span class="sxs-lookup"><span data-stu-id="010b7-107">Invoice schedules are configured at the contract line level.</span></span> <span data-ttu-id="010b7-108">Svaka linija ugovora može imati različit raspored faktura ili isti raspored faktura može biti uključen u svaki red ugovora.</span><span class="sxs-lookup"><span data-stu-id="010b7-108">Each line on a contract can have a distinct invoice schedule, or the same invoice schedule can be included on every line of the contract.</span></span>

<span data-ttu-id="010b7-109">Kada kreirate fakturu, sistem uvek kreira najmanje jednu fakturu po ugovoru o projektu.</span><span class="sxs-lookup"><span data-stu-id="010b7-109">When you create an invoice, the system always creates at least one invoice per project contract.</span></span> <span data-ttu-id="010b7-110">U nekim slučajevima može biti napravljeno više faktura.</span><span class="sxs-lookup"><span data-stu-id="010b7-110">In some cases, there may be multiple invoices created.</span></span> <span data-ttu-id="010b7-111">Na primer, ako ugovor ima više klijenata, stvoriće se isti broj faktura kao i broj klijenata koji imaju fakturisane transakcije za fakturisanje na tom ugovoru o projektu.</span><span class="sxs-lookup"><span data-stu-id="010b7-111">For example, if the contract has multiple customers, the same number of invoices will be created as the number of customers that have billable transactions to invoice on that project contract.</span></span>

## <a name="understand-how-transactions-are-included-on-an-invoice"></a><span data-ttu-id="010b7-112">Shvatite kako su transakcije uključene u fakturu</span><span class="sxs-lookup"><span data-stu-id="010b7-112">Understand how transactions are included on an invoice</span></span> 

<span data-ttu-id="010b7-113">Ponekad svaki predmet ugovora zasnovanog na projektu navodi zaseban raspored faktura.</span><span class="sxs-lookup"><span data-stu-id="010b7-113">Sometimes, each project-based contract line specifies a separate invoice schedule.</span></span> <span data-ttu-id="010b7-114">Na primer, usluge implementacije za Adatum ugovor imaju sledeće predmete ugovora:</span><span class="sxs-lookup"><span data-stu-id="010b7-114">For example, implementation services for the Adatum contract have the following contract lines:</span></span>

- <span data-ttu-id="010b7-115">Prototip rada koji je fiksna cena sa dve ručno kreirane kontrolne tačke.</span><span class="sxs-lookup"><span data-stu-id="010b7-115">Prototype work that is a fixed price with two manually created milestones.</span></span>
- <span data-ttu-id="010b7-116">Radovi primene koji uključuju vreme i koji će se naplaćivati na dve nedelje ponedeljkom.</span><span class="sxs-lookup"><span data-stu-id="010b7-116">Implementation work that includes Time and will be billed bi-weekly on Mondays.</span></span>
- <span data-ttu-id="010b7-117">Nastali troškovi koji treba da se obračunavaju mesečno prvog ponedeljka u mesecu.</span><span class="sxs-lookup"><span data-stu-id="010b7-117">Expenses incurred that need to be billed monthly on the first Monday of each month.</span></span>

<span data-ttu-id="010b7-118">Rasporedi faktura definisani za svaku od ove dve stavke porudžbina izgledaju kao sledeća tabela:</span><span class="sxs-lookup"><span data-stu-id="010b7-118">Invoice schedules defined on each of these two line items look like the following table:</span></span>

| <span data-ttu-id="010b7-119">Predmet ugovora</span><span class="sxs-lookup"><span data-stu-id="010b7-119">Contract line</span></span> | <span data-ttu-id="010b7-120">Datum za pokretanje fakture</span><span class="sxs-lookup"><span data-stu-id="010b7-120">Invoice run date</span></span> | <span data-ttu-id="010b7-121">Datum isključivanja transakcije</span><span class="sxs-lookup"><span data-stu-id="010b7-121">Transaction cut-off date</span></span> | <span data-ttu-id="010b7-122">Datum kontrolne tačke</span><span class="sxs-lookup"><span data-stu-id="010b7-122">Milestone date</span></span> | <span data-ttu-id="010b7-123">Iznos kontrolne tačke</span><span class="sxs-lookup"><span data-stu-id="010b7-123">Milestone amount</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="010b7-124">Prototip rada</span><span class="sxs-lookup"><span data-stu-id="010b7-124">Prototype work</span></span> | <span data-ttu-id="010b7-125">5. oktobar, ponedeljak</span><span class="sxs-lookup"><span data-stu-id="010b7-125">October 5, Monday</span></span> | - | <span data-ttu-id="010b7-126">5. oktobar, ponedeljak</span><span class="sxs-lookup"><span data-stu-id="010b7-126">October 5, Monday</span></span> | <span data-ttu-id="010b7-127">5000 USD</span><span class="sxs-lookup"><span data-stu-id="010b7-127">5000 USD</span></span> |
| - | <span data-ttu-id="010b7-128">3. novembar, utorak</span><span class="sxs-lookup"><span data-stu-id="010b7-128">November 3, Tuesday</span></span> | - | <span data-ttu-id="010b7-129">3. novembar, utorak</span><span class="sxs-lookup"><span data-stu-id="010b7-129">November 3, Tuesday</span></span> | <span data-ttu-id="010b7-130">12,000 USD</span><span class="sxs-lookup"><span data-stu-id="010b7-130">12,000 USD</span></span> |
| <span data-ttu-id="010b7-131">Rad primene</span><span class="sxs-lookup"><span data-stu-id="010b7-131">Implementation work</span></span> | <span data-ttu-id="010b7-132">5. oktobar, ponedeljak</span><span class="sxs-lookup"><span data-stu-id="010b7-132">October 5, Monday</span></span> | <span data-ttu-id="010b7-133">4. oktobar, nedelja</span><span class="sxs-lookup"><span data-stu-id="010b7-133">October 4, Sunday</span></span> | - | - |
| - | <span data-ttu-id="010b7-134">19. oktobar, ponedeljak</span><span class="sxs-lookup"><span data-stu-id="010b7-134">October 19, Monday</span></span> | <span data-ttu-id="010b7-135">18. oktobar, nedelja</span><span class="sxs-lookup"><span data-stu-id="010b7-135">October 18, Sunday</span></span> | - | - |
| - | <span data-ttu-id="010b7-136">2. novembar, ponedeljak</span><span class="sxs-lookup"><span data-stu-id="010b7-136">November 2, Monday</span></span> | <span data-ttu-id="010b7-137">1. novembar, nedelja</span><span class="sxs-lookup"><span data-stu-id="010b7-137">November 1, Sunday</span></span> | - | - |
| - | <span data-ttu-id="010b7-138">16. novembar, ponedeljak</span><span class="sxs-lookup"><span data-stu-id="010b7-138">November 16, Monday</span></span> | <span data-ttu-id="010b7-139">15. novembar, nedelja</span><span class="sxs-lookup"><span data-stu-id="010b7-139">November 15, Sunday</span></span> | - | - |
| <span data-ttu-id="010b7-140">Troškovi nastali</span><span class="sxs-lookup"><span data-stu-id="010b7-140">Expenses incurred</span></span> | <span data-ttu-id="010b7-141">5. oktobar, ponedeljak</span><span class="sxs-lookup"><span data-stu-id="010b7-141">October 5, Monday</span></span> | <span data-ttu-id="010b7-142">4. oktobar, nedelja</span><span class="sxs-lookup"><span data-stu-id="010b7-142">October 4, Sunday</span></span> | - | - |
| - | <span data-ttu-id="010b7-143">2. novembar, ponedeljak</span><span class="sxs-lookup"><span data-stu-id="010b7-143">November 2, Monday</span></span> | <span data-ttu-id="010b7-144">1. novembar, nedelja</span><span class="sxs-lookup"><span data-stu-id="010b7-144">November 1, Sunday</span></span> | - | - |

<span data-ttu-id="010b7-145">U ovom primeru, kada se pokreće automatsko fakturisanje:</span><span class="sxs-lookup"><span data-stu-id="010b7-145">In this example when the automatic invoicing runs on:</span></span>

- <span data-ttu-id="010b7-146">**4. oktobar ili bilo koji datum pre**: Za ovaj ugovor se ne generiše faktura jer tabela **Raspored faktura** za svaki od ovih predmeta ugovora ne poziva 4. oktobar, nedelju kao datum pokretanja fakture.</span><span class="sxs-lookup"><span data-stu-id="010b7-146">**October 4 or any date before**: No invoice is generated for this contract because the **Invoice Schedule** table for each of these contract lines doesn't call out October 4, Sunday as an invoice run date.</span></span>
- <span data-ttu-id="010b7-147">**5. oktobar, ponedeljak**: Jedna faktura se generiše za:</span><span class="sxs-lookup"><span data-stu-id="010b7-147">**October 5 Monday**: One invoice is generated for:</span></span>

    - <span data-ttu-id="010b7-148">Prototip rada koji uključuje kontrolnu tačku, ako je označena kao **Spremno za fakturisanje**.</span><span class="sxs-lookup"><span data-stu-id="010b7-148">Prototype work that includes the milestone, if it is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="010b7-149">Rad primene koji uključuje sve vremenske transakcije kreirane pre datuma preseka transakcije 4. oktobra, nedelja, označene kao **Spremno za fakturisanje**.</span><span class="sxs-lookup"><span data-stu-id="010b7-149">Implementation work that includes all Time transactions created before the transaction cut-off date of October 4, Sunday, that is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="010b7-150">Nastali troškovi koji uključuju sve transakcije troškova kreirane pre datuma preseka transakcije 4. oktobra, nedelja, označene kao **Spremno za fakturisanje**.</span><span class="sxs-lookup"><span data-stu-id="010b7-150">Expense incurred that includes all Expense transactions created before the transaction cut-off date of October 4, Sunday, that is marked as **Ready to Invoice**.</span></span>
  
- <span data-ttu-id="010b7-151">**6. oktobar ili bilo koji datum pre 19. oktobra**: Za ovaj ugovor se ne generiše faktura jer tabela **Raspored faktura** za svaki od ovih predmeta ugovora ne poziva 6. oktobar niti bilo koji datum pre 19. oktobra kao datum pokretanja fakture.</span><span class="sxs-lookup"><span data-stu-id="010b7-151">**On October 6 or any date before October 19**: No invoice is generated for this contract since the **Invoice Schedule** table for each of these contract lines does not call out October 6 or any date before October 19 as an invoice run date.</span></span>
- <span data-ttu-id="010b7-152">**19. oktobar, ponedeljak**: Jedna faktura se generiše za rad primene koji uključuje sve vremenske transakcije kreirane pre datuma preseka transakcije 18. oktobra, nedelja, označene kao **Spremno za fakturisanje**.</span><span class="sxs-lookup"><span data-stu-id="010b7-152">**October 19, Monday**: One invoice is generated for implementation work that includes all Time transactions created before the transaction cut-off date of October 18, Sunday, that is marked as **Ready to Invoice**.</span></span>
- <span data-ttu-id="010b7-153">**2. novembar, ponedeljak**: Jedna faktura se generiše za:</span><span class="sxs-lookup"><span data-stu-id="010b7-153">**November 2 Monday**: One invoice is generated for:</span></span>

    - <span data-ttu-id="010b7-154">Rad primene koji uključuje sve vremenske transakcije kreirane pre datuma preseka transakcije 1. novembra, nedelja, označene kao **Spremno za fakturisanje**.</span><span class="sxs-lookup"><span data-stu-id="010b7-154">Implementation work that includes all Time transactions created before the transaction cut-off date of November 1, Sunday, that is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="010b7-155">Nastali troškovi koji uključuju sve transakcije troškova kreirane pre datuma preseka transakcije 1. novembra, nedelja, označene kao **Spremno za fakturisanje**.</span><span class="sxs-lookup"><span data-stu-id="010b7-155">Expense incurred that includes all Expense transactions created before the transaction cut-off date of November 1, Sunday, that is marked as **Ready to Invoice**.</span></span>

- <span data-ttu-id="010b7-156">**3. novembar, utorak**: Jedna faktura se generiše za prototip rada koji uključuje kontrolnu tačku za 12.000 USD, ako je označena kao **Spremno za fakturisanje**.</span><span class="sxs-lookup"><span data-stu-id="010b7-156">**November 3, Tuesday**: One invoice is generated for prototype work that includes the milestone for 12000 USD, if it is marked as **Ready to Invoice**.</span></span>

## <a name="configure-automatic-invoicing"></a><span data-ttu-id="010b7-157">Konfigurišite automatsko fakturisanje</span><span class="sxs-lookup"><span data-stu-id="010b7-157">Configure automatic invoicing</span></span>

<span data-ttu-id="010b7-158">Dovršite sledeće korake da biste konfigurisali automatsko pokretanje faktura.</span><span class="sxs-lookup"><span data-stu-id="010b7-158">Complete the following steps to configure an automated invoice run.</span></span>

1. <span data-ttu-id="010b7-159">U odeljku **Project Operations**, idite na **Podešavanja** > **Podešavanje periodične fakture**.</span><span class="sxs-lookup"><span data-stu-id="010b7-159">In **Project Operations**, go to **Settings** > **Recurring Invoice Setup**.</span></span>
2. <span data-ttu-id="010b7-160">Kreirajte grupni posao i imenujte ga **Kreiranje faktura u usluzi Project Operations**.</span><span class="sxs-lookup"><span data-stu-id="010b7-160">Create a batch job, and name it **rPoject Operations Create Invoices**.</span></span> <span data-ttu-id="010b7-161">Naziv grupnog posla mora da sadrži reči „kreiranje faktura“.</span><span class="sxs-lookup"><span data-stu-id="010b7-161">The name of the batch job must include the words, "create invoices".</span></span>
3. <span data-ttu-id="010b7-162">U polju **Tip posla** izaberite **Nijedan**.</span><span class="sxs-lookup"><span data-stu-id="010b7-162">In the **Job Type** field, select **None**.</span></span> <span data-ttu-id="010b7-163">Podrazumevano se polja **Dnevna učestalost** i **Je aktivna** podešavaju na **Da**.</span><span class="sxs-lookup"><span data-stu-id="010b7-163">By default, the **Frequency Daily** and **Is Active** fields are set to **Yes**.</span></span>
4. <span data-ttu-id="010b7-164">Izaberite **Pokreni tok posla**.</span><span class="sxs-lookup"><span data-stu-id="010b7-164">Select **Run Workflow**.</span></span> <span data-ttu-id="010b7-165">U dijalogu **Pronalaženje zapisa** ćete videti tri toka posla:</span><span class="sxs-lookup"><span data-stu-id="010b7-165">In the **Look Up Record** dialog box, you will see three workflows:</span></span>

- <span data-ttu-id="010b7-166">ProcessRunCaller</span><span class="sxs-lookup"><span data-stu-id="010b7-166">ProcessRunCaller</span></span>
- <span data-ttu-id="010b7-167">ProcessRunner</span><span class="sxs-lookup"><span data-stu-id="010b7-167">ProcessRunner</span></span>
- <span data-ttu-id="010b7-168">UpdateRoleUtilization</span><span class="sxs-lookup"><span data-stu-id="010b7-168">UpdateRoleUtilization</span></span>

5. <span data-ttu-id="010b7-169">Izaberite **ProcessRunCaller**, a zatim **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="010b7-169">Select **ProcessRunCaller**, and then select **Add**.</span></span>
6. <span data-ttu-id="010b7-170">U sledećem dijalogu izaberite **U redu**.</span><span class="sxs-lookup"><span data-stu-id="010b7-170">In the next dialog box, select **OK**.</span></span> <span data-ttu-id="010b7-171">Tok posla **Hibernacija** prati tok posla **Proces**.</span><span class="sxs-lookup"><span data-stu-id="010b7-171">A **Sleep** workflow is followed by a **Process** workflow.</span></span> 

> [!NOTE]
> <span data-ttu-id="010b7-172">Možete izabrati i **ProcessRunner** u koraku 5.</span><span class="sxs-lookup"><span data-stu-id="010b7-172">You can also select **ProcessRunner** in step 5.</span></span> <span data-ttu-id="010b7-173">Nakon toga, kada izaberete **U redu**, tok posla **Proces** će biti praćen tokom posla **Hibernacija**.</span><span class="sxs-lookup"><span data-stu-id="010b7-173">Then, when you select **OK**, a **Process** workflow is followed by a **Sleep** workflow.</span></span>

<span data-ttu-id="010b7-174">Tokovi posla **ProcessRunCaller** i **ProcessRunner** kreiraju fakture.</span><span class="sxs-lookup"><span data-stu-id="010b7-174">The **ProcessRunCaller** and **ProcessRunner** workflows create invoices.</span></span> <span data-ttu-id="010b7-175">**ProcessRunCaller** poziva **ProcessRunner**.</span><span class="sxs-lookup"><span data-stu-id="010b7-175">**ProcessRunCaller** calls **ProcessRunner**.</span></span> <span data-ttu-id="010b7-176">**ProcessRunner** je tok posla koji zapravo kreira fakture.</span><span class="sxs-lookup"><span data-stu-id="010b7-176">**ProcessRunner** is the workflow that actually creates the invoices.</span></span> <span data-ttu-id="010b7-177">Tok posla prolazi kroz sve predmete ugovora za koje se moraju kreirati fakture i kreira fakture za te predmete.</span><span class="sxs-lookup"><span data-stu-id="010b7-177">The workflow goes through all the contract lines that invoices must be created for, and creates invoices for those lines.</span></span> <span data-ttu-id="010b7-178">Da bi odredio predmete ugovora za koje fakture moraju biti kreirane, posao traži datume pokretanja fakture za predmete ugovora.</span><span class="sxs-lookup"><span data-stu-id="010b7-178">To determine the contract lines that invoices must be created for, the job looks at invoice run dates for the contract lines.</span></span> <span data-ttu-id="010b7-179">Ako predmeti ugovora koji pripadaju jednom ugovoru imaju isti datum pokretanja fakture, transakcije se kombinuju u jednu fakturu koja ima dve stavke fakture.</span><span class="sxs-lookup"><span data-stu-id="010b7-179">If contract lines that belong to one contract have the same invoice run date, the transactions are combined into one invoice that has two invoice lines.</span></span> <span data-ttu-id="010b7-180">Ako ne postoje transakcije za koje treba kreirati fakture, posao preskače kreiranje fakture.</span><span class="sxs-lookup"><span data-stu-id="010b7-180">If there are no transactions to create invoices for, the job skips creating an invoice.</span></span>

<span data-ttu-id="010b7-181">Nakon što se **ProcessRunner** pokrene, on poziva **ProcessRunCaller**, obezbeđuje vreme završetka i zatvara se.</span><span class="sxs-lookup"><span data-stu-id="010b7-181">After **ProcessRunner** has finished running, it calls **ProcessRunCaller**, provides the end time, and is closed.</span></span> <span data-ttu-id="010b7-182">**ProcessRunCaller** zatim pokreće tajmer koji će biti pokrenut tokom perioda od 24 časa od određenog vremena završetka.</span><span class="sxs-lookup"><span data-stu-id="010b7-182">**ProcessRunCaller** then starts a timer that runs for 24-hours from the specified end time.</span></span> <span data-ttu-id="010b7-183">Na kraju tajmera **ProcessRunCaller** se zatvara.</span><span class="sxs-lookup"><span data-stu-id="010b7-183">At the end of the timer, **ProcessRunCaller** is closed.</span></span>

<span data-ttu-id="010b7-184">Posao grupne obrade za kreiranje faktura je periodični posao.</span><span class="sxs-lookup"><span data-stu-id="010b7-184">The batch process job for creating invoices is a recurrent job.</span></span> <span data-ttu-id="010b7-185">Ako se ova grupna obrada pokreće više puta, kreira se više instanci posla i izazivaju greške.</span><span class="sxs-lookup"><span data-stu-id="010b7-185">If this batch process is run many times, multiple instances of the job are created and causes errors.</span></span> <span data-ttu-id="010b7-186">Zbog toga bi trebalo samo jednom da pokrenete grupnu obradu i da je ponovo pokrenete samo ako prestane da radi.</span><span class="sxs-lookup"><span data-stu-id="010b7-186">Therefore, you should start the batch process only one time, and then restart only if it stops running.</span></span>

> [!NOTE]
> <span data-ttu-id="010b7-187">Grupno fakturisanje u usluzi Project Operations se izvodi samo za predmete ugovora o projektu koji su konfigurisani prema rasporedima faktura.</span><span class="sxs-lookup"><span data-stu-id="010b7-187">Batch invoicing in Project Operations only runs for project contract lines that are configured by invoice schedules.</span></span> <span data-ttu-id="010b7-188">Predmet ugovora sa načinom naplate uz fiksnu cenu mora da ima konfigurisane kontrolne tačke.</span><span class="sxs-lookup"><span data-stu-id="010b7-188">A contract line with a fixed price billing method must have milestones configured.</span></span> <span data-ttu-id="010b7-189">Predmet ugovora za projekat sa načinom naplate vremena i materijala treba da uspostavi raspored faktura na osnovu datuma.</span><span class="sxs-lookup"><span data-stu-id="010b7-189">A project contract line with a time and material billing method will need a date-based invoice schedule set up.</span></span>


[!INCLUDE[footer-include](../../includes/footer-banner.md)]
